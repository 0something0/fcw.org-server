diff -Nurd -X.diff_ignore freeciv/common/packets.c freeciv/common/packets.c
--- freeciv/common/packets.c	2012-08-01 01:44:07.000000000 +0300
+++ freeciv/common/packets.c	2012-08-28 12:11:25.000000000 +0300
@@ -351,8 +351,8 @@
   struct data_in din;
 #ifdef USE_COMPRESSION
   bool compressed_packet = FALSE;
-  int header_size = 0;
 #endif
+  int header_size = 4;
 
   *presult = FALSE;
 
